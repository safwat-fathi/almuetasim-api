echo "🎯 Running lint-staged to check code style..."
case `uname` in
  *CYGWIN*|*MINGW*|*MSYS*)
    npx.cmd lint-staged # bug on Windows/Github Desktop: add `.cmd` extension fixes it
  ;;
  *)
    npx lint-staged
  ;;
esac

# build step
echo "🔨 Running build to check for compilation errors..."
npm run build

# Check if build was successful
if [ $? -ne 0 ]; then
  echo "❌ Build failed!"
  echo "🛑 Commit aborted."
  exit 1
fi

echo "✅ Build successful."
echo "✅ Pre-commit checks passed. Proceeding with commit."